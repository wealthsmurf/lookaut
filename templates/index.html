<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title id="site-title">ë¸”ë¡ ë””íœìŠ¤ - ë¬´ë£Œ ì˜¨ë¼ì¸ ë°˜ì‘ì†ë„ ë° ì§‘ì¤‘ë ¥ í…ŒìŠ¤íŠ¸</title>
    
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0000000000000000" crossorigin="anonymous"></script>

    <style>
        :root { --main-bg: #fdfdfd; --primary: #333; --accent: #007bff; --danger: #ff4d4d; }
        body { margin: 0; background: var(--main-bg); font-family: 'Apple SD Gothic Neo', 'Malgun Gothic', sans-serif; color: #333; overflow-x: hidden; }
        
        header { background: #fff; border-bottom: 1px solid #eee; padding: 20px 0; text-align: center; width: 100%; position: relative; }
        header h1 { margin: 0; font-size: 22px; color: var(--primary); letter-spacing: -1px; }
        
        /* ì–¸ì–´ ì „í™˜ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        #lang-toggle { position: absolute; top: 20px; right: 20px; padding: 5px 10px; border: 1px solid #ddd; border-radius: 5px; background: #fff; cursor: pointer; font-size: 12px; font-weight: bold; }
        #lang-toggle:hover { background: #f5f5f5; }

        nav { margin-top: 10px; font-size: 13px; color: #777; }
        #main-container { display: flex; flex-direction: column; align-items: center; padding: 20px 0; }

        #game-wrapper { position: relative; margin: 10px 0; }
        canvas { 
            background: #ffffff; border: 4px solid var(--primary); 
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            width: 80vw; max-width: 400px; height: auto; display: block; border-radius: 10px;
        }

        #ui-panel { position: absolute; top: 15px; width: 80vw; max-width: 400px; display: flex; justify-content: space-between; align-items: center; pointer-events: none; z-index: 10; }
        .info-box { background: rgba(255,255,255,0.9); padding: 5px 12px; border: 2px solid var(--primary); border-radius: 8px; font-weight: bold; font-size: 13px; pointer-events: auto; }
        
        .ad-placeholder { width: 80vw; max-width: 320px; height: 100px; background: #f0f0f0; margin: 15px 0; display: flex; align-items: center; justify-content: center; font-size: 11px; color: #aaa; border: 1px dashed #ccc; }

        .content-section { width: 85vw; max-width: 700px; background: #fff; padding: 30px; margin-top: 30px; border-radius: 15px; line-height: 1.8; box-shadow: 0 5px 15px rgba(0,0,0,0.03); }
        .content-section h2 { border-left: 5px solid var(--accent); padding-left: 12px; font-size: 20px; margin-bottom: 20px; }
        .content-section h3 { font-size: 17px; margin-top: 25px; color: var(--accent); }

        .panel { display: none; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 30px; border-radius: 20px; border: 3px solid var(--primary); z-index: 100; text-align: center; width: 70%; max-width: 280px; box-shadow: 0 0 50px rgba(0,0,0,0.2); }
        button { padding: 12px 25px; background: var(--primary); color: white; border: none; border-radius: 30px; cursor: pointer; font-weight: bold; font-size: 15px; transition: 0.2s; }
        button:hover { background: var(--accent); transform: translateY(-2px); }

        footer { margin-top: 60px; padding: 40px; font-size: 12px; color: #999; text-align: center; border-top: 1px solid #eee; width: 100%; }
        footer a { color: #999; text-decoration: none; margin: 0 8px; }
    </style>
</head>
<body>

<header>
    <h1 id="txt-header-title">ğŸ›¡ï¸ BLOCK DEFENSE</h1>
    <button id="lang-toggle" onclick="toggleLang()">KO / EN</button>
    <nav id="txt-nav">ë¬´ë£Œ ë°˜ì‘ì†ë„ í…ŒìŠ¤íŠ¸ | ì˜¨ë¼ì¸ ì›¹ê²Œì„</nav>
</header>

<div id="main-container">
    <div class="ad-placeholder">AD - TOP BANNER</div>

    <div id="game-wrapper">
        <div id="ui-panel">
            <div id="time-display" class="info-box">0.0s</div>
            <div id="best-display" class="info-box" style="color: var(--accent);">Best: 0.0s</div>
        </div>
        
        <canvas id="gameCanvas"></canvas>

        <div id="start-overlay" class="panel" style="display: flex; flex-direction: column;">
            <h2 id="txt-start-title" style="margin: 0 0 15px 0;">ğŸ›¡ï¸ ê²Œì„ ì‹œì‘</h2>
            <p id="txt-start-desc" style="font-size: 13px; color: #666; text-align: left;">
                1. <b>í°ìƒ‰ ì ë°•ì´</b> ë¸”ë¡ì„ í´ë¦­í•´ ì œê±°í•˜ì„¸ìš”.<br>
                2. <b>ë¹¨ê°„ ì„ </b>ì— ë‹¿ìœ¼ë©´ ê²Œì„ì´ ì¢…ë£Œë©ë‹ˆë‹¤.<br>
                3. <b>ê²€ì€ SLOW</b> ë¸”ë¡ì„ ê¹¨ë©´ ì†ë„ê°€ ì¤„ì–´ë“­ë‹ˆë‹¤.
            </p>
            <button id="txt-start-btn" onclick="startGame()">ë°©ì–´ ì‹œì‘</button>
        </div>

        <div id="ad-modal" class="panel">
            <h3 id="txt-pause-title">ì ì‹œ íœ´ì‹!</h3>
            <div style="background:#f9f9f9; margin-bottom:15px; min-height:100px; border-radius:10px; display:flex; align-items:center; justify-content:center;">
                <p id="txt-pause-desc" style="font-size:11px; color:#999;">ê´‘ê³  ë¡œë“œ ëŒ€ê¸° ì¤‘...</p>
            </div>
            <button id="txt-pause-btn" onclick="closeAd()">ê³„ì†í•˜ê¸°</button>
        </div>

        <div id="game-over-panel" class="panel">
            <h2 id="txt-gameover-title" style="color: var(--danger);">GAME OVER</h2>
            <div id="final-time-val" style="font-size: 32px; font-weight: bold; margin-bottom: 20px;">0.0s</div>
            <button id="txt-restart-btn" onclick="location.reload()">ë‹¤ì‹œ ë„ì „</button>
        </div>
    </div>

    <section class="content-section" id="translatable-content">
        <h2 id="txt-content-h2">ë¸”ë¡ ë””íœìŠ¤: ì›¹ ê¸°ë°˜ ë°˜ì‘ì†ë„ í›ˆë ¨</h2>
        <p id="txt-content-p1"><b>ë¸”ë¡ ë””íœìŠ¤(Block Defense)</b>ëŠ” ë³„ë„ì˜ ì„¤ì¹˜ ì—†ì´ ë¸Œë¼ìš°ì €ì—ì„œ ì¦‰ì‹œ ì¦ê¸¸ ìˆ˜ ìˆëŠ” HTML5 ê¸°ë°˜ ì•„ì¼€ì´ë“œ ê²Œì„ì…ë‹ˆë‹¤. ì‚¬ìš©ìì˜ ë™ì  ì‹œë ¥ê³¼ í´ë¦­ ì •í™•ë„ë¥¼ í…ŒìŠ¤íŠ¸í•˜ë©°, ì‹¬ë¦¬ì  ì§‘ì¤‘ë ¥ì„ ë†’ì´ëŠ” ë° ë„ì›€ì„ ì¤ë‹ˆë‹¤.</p>
        
        <h3 id="txt-content-h3-1">ì£¼ìš” ê²Œì„ ë©”ì»¤ë‹ˆì¦˜</h3>
        <p id="txt-content-p2">ê²Œì„ì´ ì‹œì‘ë˜ë©´ ìƒë‹¨ì—ì„œ ë‹¤ì–‘í•œ ë¸”ë¡ì´ ì¤‘ë ¥ ê°€ì†ë„ì— ì˜í•´ í•˜ê°•í•©ë‹ˆë‹¤. í”Œë ˆì´ì–´ëŠ” í•˜ë‹¨ì˜ <b>ë°ë“œë¼ì¸(Red Line)</b>ì„ ë³´í˜¸í•´ì•¼ í•©ë‹ˆë‹¤. í°ìƒ‰ ë°°ê²½ì— ê²€ì€ìƒ‰ ì ì´ ë°•íŒ ê¸°ë³¸ ë¸”ë¡ì€ í´ë¦­ ì‹œ íŒŒê´´ë˜ë©° ì ìˆ˜ë¥¼ íšë“í•©ë‹ˆë‹¤.</p>
        
        <h3 id="txt-content-h3-2">ì „ëµì  ìš”ì†Œ: ìŠ¬ë¡œìš° ëª¨ì…˜ ì‹œìŠ¤í…œ</h3>
        <p id="txt-content-p3">ê²Œì„ ì¤‘ ë¬´ì‘ìœ„ë¡œ ë“±ì¥í•˜ëŠ” <b>ê²€ì€ìƒ‰ ë³´ë„ˆìŠ¤ ë¸”ë¡</b>ì€ ë‚œì´ë„ë¥¼ ì¡°ì ˆí•˜ëŠ” í•µì‹¬ ìš”ì†Œì…ë‹ˆë‹¤. ì´ ë¸”ë¡ì„ íŒŒê´´í•˜ë©´ ì¼ì‹œì ì¸ ìŠ¬ë¡œìš° ëª¨ì…˜ íš¨ê³¼ê°€ ë°œìƒí•˜ë©°, ì ì§„ì ìœ¼ë¡œ ë¹¨ë¼ì§€ëŠ” ë¸”ë¡ì˜ ì†ë„ë¥¼ ëŠ¦ì¶° ì¥ê¸°ì ì¸ ìƒì¡´ì„ ê°€ëŠ¥í•˜ê²Œ í•©ë‹ˆë‹¤.</p>
    </section>

    <div class="ad-placeholder">AD - BOTTOM BANNER</div>
</div>

<footer>
    <div style="margin-bottom:15px;">
        <a href="#" id="txt-footer-p1">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a> | <a href="#" id="txt-footer-p2">ì´ìš©ì•½ê´€</a>
    </div>
    <p>Â© 2026 Block Defense Team. All rights reserved.</p>
</footer>

<script>
    // --- 1. ë‹¤êµ­ì–´ ë°ì´í„° ì„¤ì • ---
    let currentLang = localStorage.getItem('gameLang') || 'ko';

    const i18n = {
        ko: {
            title: "ë¸”ë¡ ë””íœìŠ¤ - ë¬´ë£Œ ì˜¨ë¼ì¸ ë°˜ì‘ì†ë„ ë° ì§‘ì¤‘ë ¥ í…ŒìŠ¤íŠ¸",
            headerTitle: "ğŸ›¡ï¸ BLOCK DEFENSE",
            nav: "ë¬´ë£Œ ë°˜ì‘ì†ë„ í…ŒìŠ¤íŠ¸ | ì˜¨ë¼ì¸ ì›¹ê²Œì„",
            startTitle: "ğŸ›¡ï¸ ê²Œì„ ì‹œì‘",
            startDesc: "1. <b>í°ìƒ‰ ì ë°•ì´</b> ë¸”ë¡ì„ í´ë¦­í•´ ì œê±°í•˜ì„¸ìš”.<br>2. <b>ë¹¨ê°„ ì„ </b>ì— ë‹¿ìœ¼ë©´ ê²Œì„ì´ ì¢…ë£Œë©ë‹ˆë‹¤.<br>3. <b>ê²€ì€ SLOW</b> ë¸”ë¡ì„ ê¹¨ë©´ ì†ë„ê°€ ì¤„ì–´ë“­ë‹ˆë‹¤.",
            startBtn: "ë°©ì–´ ì‹œì‘",
            pauseTitle: "ì ì‹œ íœ´ì‹!",
            pauseDesc: "ê´‘ê³  ë¡œë“œ ëŒ€ê¸° ì¤‘...",
            pauseBtn: "ê³„ì†í•˜ê¸°",
            gameoverTitle: "ê²Œì„ ì¢…ë£Œ",
            restartBtn: "ë‹¤ì‹œ ë„ì „",
            contentH2: "ë¸”ë¡ ë””íœìŠ¤: ì›¹ ê¸°ë°˜ ë°˜ì‘ì†ë„ í›ˆë ¨",
            contentP1: "<b>ë¸”ë¡ ë””íœìŠ¤(Block Defense)</b>ëŠ” ë³„ë„ì˜ ì„¤ì¹˜ ì—†ì´ ë¸Œë¼ìš°ì €ì—ì„œ ì¦‰ì‹œ ì¦ê¸¸ ìˆ˜ ìˆëŠ” HTML5 ê¸°ë°˜ ì•„ì¼€ì´ë“œ ê²Œì„ì…ë‹ˆë‹¤.",
            contentH3_1: "ì£¼ìš” ê²Œì„ ë©”ì»¤ë‹ˆì¦˜",
            contentP2: "ê²Œì„ì´ ì‹œì‘ë˜ë©´ ìƒë‹¨ì—ì„œ ë‹¤ì–‘í•œ ë¸”ë¡ì´ í•˜ê°•í•©ë‹ˆë‹¤. í”Œë ˆì´ì–´ëŠ” í•˜ë‹¨ì˜ ë¹¨ê°„ ì„ ì„ ë³´í˜¸í•´ì•¼ í•©ë‹ˆë‹¤.",
            contentH3_2: "ì „ëµì  ìš”ì†Œ: ìŠ¬ë¡œìš° ëª¨ì…˜",
            contentP3: "ê²€ì€ìƒ‰ ë¸”ë¡ì€ ì†ë„ë¥¼ ëŠ¦ì¶”ëŠ” í•µì‹¬ ì•„ì´í…œì…ë‹ˆë‹¤. ì´ë¥¼ íŒŒê´´í•´ ê³ ë“ì ì„ ë…¸ë¦¬ì„¸ìš”.",
            footerP1: "ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨", footerP2: "ì´ìš©ì•½ê´€"
        },
        en: {
            title: "Block Defense - Free Online Reaction Test",
            headerTitle: "ğŸ›¡ï¸ BLOCK DEFENSE",
            nav: "Free Reaction Test | Online Web Game",
            startTitle: "ğŸ›¡ï¸ START GAME",
            startDesc: "1. Click <b>White Dotted</b> blocks to destroy.<br>2. Protect the <b>Red Line</b> at the bottom.<br>3. Destroy <b>Black SLOW</b> blocks to slow down.",
            startBtn: "Start Defense",
            pauseTitle: "PAUSED",
            pauseDesc: "Loading content...",
            pauseBtn: "Continue",
            gameoverTitle: "GAME OVER",
            restartBtn: "Try Again",
            contentH2: "Block Defense: Reaction Training",
            contentP1: "<b>Block Defense</b> is an HTML5-based arcade game you can play instantly in your browser without installation.",
            contentH3_1: "Game Mechanics",
            contentP2: "Blocks fall from the top. You must protect the red deadline at the bottom of the screen.",
            contentH3_2: "Strategy: Slow Motion",
            contentP3: "Black blocks are key items. Destroy them to slow down the falling speed for survival.",
            footerP1: "Privacy Policy", footerP2: "Terms"
        }
    };

    function updateLanguage() {
        const lang = i18n[currentLang];
        document.getElementById('site-title').innerText = lang.title;
        document.getElementById('txt-header-title').innerText = lang.headerTitle;
        document.getElementById('txt-nav').innerText = lang.nav;
        document.getElementById('txt-start-title').innerText = lang.startTitle;
        document.getElementById('txt-start-desc').innerHTML = lang.startDesc;
        document.getElementById('txt-start-btn').innerText = lang.startBtn;
        document.getElementById('txt-pause-title').innerText = lang.pauseTitle;
        document.getElementById('txt-pause-desc').innerText = lang.pauseDesc;
        document.getElementById('txt-pause-btn').innerText = lang.pauseBtn;
        document.getElementById('txt-gameover-title').innerText = lang.gameoverTitle;
        document.getElementById('txt-restart-btn').innerText = lang.restartBtn;
        document.getElementById('txt-content-h2').innerText = lang.contentH2;
        document.getElementById('txt-content-p1').innerHTML = lang.contentP1;
        document.getElementById('txt-content-h3-1').innerText = lang.contentH3_1;
        document.getElementById('txt-content-p2').innerText = lang.contentP2;
        document.getElementById('txt-content-h3-2').innerText = lang.contentH3_2;
        document.getElementById('txt-content-p3').innerText = lang.contentP3;
        document.getElementById('txt-footer-p1').innerText = lang.footerP1;
        document.getElementById('txt-footer-p2').innerText = lang.footerP2;
    }

    function toggleLang() {
        currentLang = (currentLang === 'ko') ? 'en' : 'ko';
        localStorage.setItem('gameLang', currentLang);
        updateLanguage();
    }

    // í˜ì´ì§€ ë¡œë“œ ì‹œ ì–¸ì–´ ì ìš©
    updateLanguage();

    // --- 2. ê¸°ì¡´ ê²Œì„ ë¡œì§ (ì‚¬ìš´ë“œ í¬í•¨) ---
    const bgm = new Audio('Bgggm.mp3'); 
    bgm.loop = true; bgm.volume = 0.5;
    let isMuted = localStorage.getItem('gameMuted') === 'true';
    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

    function playSfx(type) {
        if (isMuted || !gameActive) return;
        const osc = audioCtx.createOscillator();
        const gain = audioCtx.createGain();
        osc.connect(gain); gain.connect(audioCtx.destination);
        const now = audioCtx.currentTime;
        if (type === 'white') { osc.frequency.setValueAtTime(800, now); gain.gain.exponentialRampToValueAtTime(0.01, now + 0.1); } 
        else if (type === 'black') { osc.frequency.setValueAtTime(400, now); gain.gain.exponentialRampToValueAtTime(0.01, now + 0.15); }
        else if (type === 'fail') { osc.frequency.setValueAtTime(200, now); gain.gain.linearRampToValueAtTime(0, now + 0.5); }
        osc.start(); osc.stop(now + 0.5);
    }

    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    canvas.width = 400; canvas.height = 650;
    const groundY = canvas.height - 60; 

    let blocks = [], particles = [], gameActive = false, isPaused = false, isGameOver = false;
    let moveSpeed = 2.3, startTime = 0, pausedTimeTotal = 0, pauseStartedAt = 0;
    let bestTime = localStorage.getItem('bestSurvivalTime') || 0;
    document.getElementById('best-display').innerText = `Best: ${parseFloat(bestTime).toFixed(1)}s`;

    class Particle {
        constructor(x, y, color) { this.x = x; this.y = y; this.color = color; this.size = Math.random() * 3 + 2; this.speedX = (Math.random() - 0.5) * 6; this.speedY = (Math.random() - 0.5) * 6 - 2; this.gravity = 0.15; this.life = 1.0; }
        update() { this.x += this.speedX; this.y += this.speedY; this.speedY += this.gravity; this.life -= 0.02; }
        draw() { ctx.save(); ctx.globalAlpha = this.life; ctx.fillStyle = this.color; ctx.fillRect(this.x, this.y, this.size, this.size); ctx.restore(); }
    }

    class Block {
        constructor(type, speed) { this.width = 60; this.height = 50; this.x = Math.random() * (canvas.width - this.width); this.y = -60; this.type = type; this.speed = speed; }
        draw() {
            ctx.save();
            ctx.fillStyle = (this.type === 'white' || this.type === 'whiteDot') ? '#FFFFFF' : '#000000';
            ctx.fillRect(this.x, this.y, this.width, this.height);
            ctx.strokeStyle = '#333'; ctx.lineWidth = 2; ctx.strokeRect(this.x, this.y, this.width, this.height);
            ctx.fillStyle = (this.type === 'white' || this.type === 'whiteDot') ? '#333' : '#FFFFFF';
            if (this.type === 'whiteDot') { ctx.beginPath(); ctx.arc(this.x + 30, this.y + 25, 4, 0, Math.PI*2); ctx.fill(); }
            else { [[15, 15], [45, 20], [20, 35], [40, 40]].forEach(p => { ctx.beginPath(); ctx.arc(this.x+p[0], this.y+p[1], 3, 0, Math.PI*2); ctx.fill(); }); }
            if(this.type === 'black') { ctx.font = 'bold 14px Arial'; ctx.textAlign = 'center'; ctx.fillText("SLOW", this.x + 30, this.y + 32); }
            ctx.restore();
        }
        update() { if (!isPaused && !isGameOver && gameActive) this.y += this.speed; }
    }

    function spawnBlock() {
        if (!isPaused && !isGameOver && gameActive) {
            let elapsed = (Date.now() - startTime - pausedTimeTotal) / 1000;
            let rand = Math.random();
            let newType = (elapsed > 20 && rand < 0.15) ? 'whiteDot' : (rand > 0.85 ? 'black' : 'white');
            blocks.push(new Block(newType, moveSpeed));
        }
        setTimeout(spawnBlock, Math.max(180, 700 - (moveSpeed * 105)));
    }

    setInterval(() => { if (!isPaused && !isGameOver && gameActive) moveSpeed += 0.08; }, 1000);

    function update() {
        if (isGameOver || !gameActive) return;
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        if (!isPaused) {
            let elapsed = (Date.now() - startTime - pausedTimeTotal) / 1000;
            document.getElementById('time-display').innerText = `${elapsed.toFixed(1)}s`;
        }
        ctx.beginPath(); ctx.moveTo(0, groundY); ctx.lineTo(canvas.width, groundY); 
        ctx.strokeStyle = '#ff4d4d'; ctx.lineWidth = 5; ctx.stroke();
        particles.forEach((p, i) => { p.update(); p.draw(); if(p.life <= 0) particles.splice(i, 1); });
        for (let i = blocks.length - 1; i >= 0; i--) {
            const b = blocks[i]; b.update(); b.draw();
            if (b.type === 'white' && b.y + b.height >= groundY) { gameOver(); return; }
            if (b.y > canvas.height) blocks.splice(i, 1);
        }
        requestAnimationFrame(update);
    }

    function gameOver() {
        isGameOver = true; playSfx('fail'); bgm.pause();
        let finalTime = (Date.now() - startTime - pausedTimeTotal) / 1000;
        document.getElementById('final-time-val').innerText = `${finalTime.toFixed(1)}s`;
        if (finalTime > parseFloat(bestTime)) localStorage.setItem('bestSurvivalTime', finalTime);
        document.getElementById('game-over-panel').style.display = 'block';
    }

    function handleInput(e) {
        if (!gameActive || isPaused || isGameOver) return;
        const rect = canvas.getBoundingClientRect();
        const scaleX = canvas.width / rect.width;
        const scaleY = canvas.height / rect.height;
        const clientX = e.touches ? e.touches[0].clientX : e.clientX;
        const clientY = e.touches ? e.touches[0].clientY : e.clientY;
        const mouseX = (clientX - rect.left) * scaleX;
        const mouseY = (clientY - rect.top) * scaleY;

        for (let i = blocks.length - 1; i >= 0; i--) {
            const b = blocks[i];
            if (mouseX >= b.x - 15 && mouseX <= b.x + b.width + 15 && mouseY >= b.y - 15 && mouseY <= b.y + b.height + 15) {
                if (b.type === 'white') {
                    playSfx('white');
                    for (let j = 0; j < 12; j++) particles.push(new Particle(b.x+30, b.y+25, '#ddd'));
                    blocks.splice(i, 1);
                } else if (b.type === 'black') {
                    showAd();
                    for (let j = 0; j < 12; j++) particles.push(new Particle(b.x+30, b.y+25, '#333'));
                    blocks.splice(i, 1);
                }
                break;
            }
        }
    }

    canvas.addEventListener('touchstart', (e) => { e.preventDefault(); handleInput(e); }, {passive: false});
    canvas.addEventListener('mousedown', handleInput);

    function showAd() {
        isPaused = true; bgm.pause(); pauseStartedAt = Date.now();
        document.getElementById('ad-modal').style.display = 'block';
    }

    function closeAd() {
        moveSpeed = Math.max(2.0, moveSpeed - 0.5);
        pausedTimeTotal += (Date.now() - pauseStartedAt);
        isPaused = false; if (!isMuted) bgm.play().catch(()=>{});
        document.getElementById('ad-modal').style.display = 'none';
    }

    function startGame() {
        document.getElementById('start-overlay').style.display = 'none';
        gameActive = true; if (audioCtx.state === 'suspended') audioCtx.resume();
        bgm.play().catch(()=>{});
        startTime = Date.now(); spawnBlock(); update();
    }
</script>

</body>
</html>
